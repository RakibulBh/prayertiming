!function(t,a){"object"==typeof exports&&"undefined"!=typeof module?a(exports):"function"==typeof define&&define.amd?define(["exports"],a):a((t="undefined"!=typeof globalThis?globalThis:t||self).prayertiming={})}(this,(function(t){"use strict";function a(t){return t*Math.PI/180}function n(t){return 180*t/Math.PI}function e(t){return Math.sin(a(t))}function i(t){return Math.cos(a(t))}function r(t,a){let n=t;return n-=a*Math.floor(t/a),n<0?n+a:n}function s(t){return r(t,360)}function o(t){return r(t,24)}function u(t){const a=new Date(t[0],t[1]-1,t[2],12,0,0,0),n=a.toGMTString();return(a-new Date(n.substring(0,n.lastIndexOf(" ")-1)))/36e5}function h(t){const a=t[0],n=u([a,0,1]),e=u([a,6,1]);return Math.min(n,e)}function m(t){return Number(String(t).split(/[^0-9.+-]/)[0])}function c(t){const a=t-2451545+8e-4,r=s(357.529+.98560028*a),u=s(280.459+.98564736*a),h=s(u+1.915*e(r)+.02*e(2*r)),m=23.439-36e-8*a;var c,f;const g=u/15-o((c=i(m)*e(h),f=i(h),n(Math.atan2(c,f))/15));var l;return{declination:(l=e(m)*e(h),n(Math.asin(l))),equation:g}}function f(t,a){return o(12-c(a+t).equation)}function g({angle:t,time:a,direction:r,jDate:s,lat:o}){const u=c(s+a).declination,h=f(a,s),m=1/15*(g=(-e(t)-e(u)*e(o))/(i(u)*i(o)),n(Math.acos(g)));var g;return h+("ccw"===r?-m:m)}function l(t){return.833+.0347*Math.sqrt(t)}function d({factor:t,time:e,jDate:i,lat:r,direction:s}){const o=c(i+e).declination;var u,h;return g({angle:(u=t+(h=Math.abs(r-o),Math.tan(a(h))),-n(Math.atan(1/u))),time:e,direction:s,jDate:i,lat:r})}function j(t){return{Standard:1,Hanafi:2}[t]||m(t)}function b(t){return-1!==String(t).indexOf("min")}function M(t,a){return o(a-t)}function p({time:t,base:a,angle:n,night:e,direction:i,settings:r}){let s=t;const o=function({angle:t,night:a,settings:n}){const e=n.highLats;let i=.5;return"AngleBased"===e&&(i=1/60*t),"OneSeventh"===e&&(i=1/7),i*a}({angle:n,night:e,settings:r}),u="ccw"===i?M(t,a):M(a,t);return(Number.isNaN(t)||u>o)&&(s=a+("ccw"===i?-o:o)),s}function y({times:t,settings:a,timeZone:n,long:e}){const i={...a};let r={...t};return Object.keys(r).forEach((t=>{r[t]+=n-e/15})),"None"!==i.highLats&&(r=function({times:t,settings:a}){const n={...a},e={...t},i=M(t.sunset,t.sunrise);return e.imsak=p({settings:a,time:t.imsak,base:t.sunrise,angle:m(n.imsak),night:i,direction:"ccw"}),e.fajr=p({settings:a,time:t.fajr,base:t.sunrise,angle:m(n.fajr),night:i,direction:"ccw"}),e.isha=p({settings:a,time:t.isha,base:t.sunset,angle:m(n.isha),night:i}),e.maghrib=p({settings:a,time:t.maghrib,base:t.sunset,angle:m(n.maghrib),night:i}),e}({times:r,settings:a})),b(i.imsak)&&(r.imsak=r.fajr-m(i.imsak)/60),b(i.maghrib)&&(r.maghrib=r.sunset+m(i.maghrib)/60),b(i.isha)&&(r.isha=r.maghrib+m(i.isha)/60),r.dhuhr+=m(i.dhuhr)/60,r}function k(t){return t<10?`0${t}`:t}function D({date:t,method:a,times:n,timeFormat:e}){const i={},r={...n};return Object.keys(r).forEach((t=>{const a=function(t,a,n){const e=n||["am","pm"];let i=t;if(Number.isNaN(t))return"--:--";if("Float"===a)return t;i=o(i+.5/60);const r=Math.floor(i),s=Math.floor(60*(i-r)),u="12h"===a?e[r<12?0:1]:"";return`${"24h"===a?k(r):(r+12-1)%12+1}:${k(s)}${u?` ${u}`:""}`}(r[t],e);i[t]=a})),i}function N({times:t,jDate:a,lat:n,elv:e,settings:i}){const r=function(t){const a={...t};return Object.keys(a).forEach((t=>{a[t]/=24})),a}(t);return{imsak:g({jDate:a,lat:n,angle:m(i.imsak),time:r.imsak,direction:"ccw"}),fajr:g({jDate:a,lat:n,angle:m(i.fajr),time:r.fajr,direction:"ccw"}),sunrise:g({jDate:a,lat:n,angle:l(e),time:r.sunrise,direction:"ccw"}),dhuhr:f(r.dhuhr,a),asr:d({jDate:a,lat:n,factor:j("Standard"),time:r.asr}),asrHanafi:d({jDate:a,lat:n,factor:j("Hanafi"),time:r.asr}),sunset:g({jDate:a,lat:n,angle:l(e),time:r.sunset}),maghrib:g({jDate:a,lat:n,angle:m(i.maghrib),time:r.maghrib}),isha:g({jDate:a,lat:n,angle:m(i.isha),time:r.isha})}}const v={MWL:{name:"Muslim World League",params:{fajr:18,isha:17}},ISNA:{name:"Islamic Society of North America (ISNA)",params:{fajr:15,isha:15}},MF:{name:"Muslims of France (MF)",params:{fajr:12,isha:12}},Egypt:{name:"Egyptian General Authority of Survey",params:{fajr:19.5,isha:17.5}},Makkah:{name:"Umm Al-Qura University, Makkah",params:{fajr:18.5,isha:"90 min"}},Karachi:{name:"University of Islamic Sciences, Karachi",params:{fajr:18,isha:18}},Tehran:{name:"Institute of Geophysics, University of Tehran",params:{fajr:17.7,isha:14,maghrib:4.5,midnight:"Jafari"}},Jafari:{name:"Shia Ithna-Ashari, Leva Institute, Qum",params:{fajr:16,isha:14,maghrib:4,midnight:"Jafari"}},JAKIM:{name:"Jabatan Kemajuan Islam Malaysia",params:{fajr:20,isha:18}}},S={imsak:5,fajr:5,sunrise:6,dhuhr:12,asr:13,asrHanafi:14,sunset:18,maghrib:18,isha:18},w={imsak:"10 min",dhuhr:"0 min",maghrib:"0 min",midnight:"Standard",highLats:"NightMiddle"},I={imsak:0,fajr:0,sunrise:0,dhuhr:0,asr:0,asrHanafi:0,sunset:0,maghrib:0,isha:0,midnight:0};t.getByDay=function({long:t,lat:a,timezone:n,dst:e,elv:i=0,date:r=new Date,timeFormat:s="24h",method:o="MWL",config:m={}}){if(!function(t){return t&&"[object Date]"===Object.prototype.toString.call(t)&&!isNaN(t)}(r))throw new Error("Invalid date");const c=[r.getFullYear(),r.getMonth()+1,r.getDate()],f=e||function(t){return Number(u(t)!==h(t))}(c),g={...w,...v[o].params,...m},l=function(t,a,n){let e=t,i=a;a<=2&&(e-=1,i+=12);const r=Math.floor(e/100),s=2-r+Math.floor(r/4);return Math.floor(365.25*(e+4716))+Math.floor(30.6001*(i+1))+n+s-1524.5}(c[0],c[1],c[2])-t/360;let d=n||h(c),j={...S};return d=Number(d)+(Number(f)?1:0),j=N({times:j,jDate:l,lat:a,elv:i,settings:g}),j=y({times:j,timeZone:d,long:t,settings:g}),j.midnight="Jafari"===g.midnight?j.sunset+M(j.sunset,j.fajr)/2:j.sunset+M(j.sunset,j.sunrise)/2,j=function(t,a){const n={...t};return Object.keys(n).forEach((t=>{n[t]+=a[t]/60})),n}(j,I),j=D({times:j,timeFormat:s}),{date:r,method:o,...j}}}));
